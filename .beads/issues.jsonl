{"id":"vitess-0e1","title":"Epic: VTGate & VTTablet Server Runtime","description":"VTGate (Worker) for query routing and aggregation. VTTablet (Durable Object) for shard management with pluggable storage engines.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T08:30:21.798213-06:00","updated_at":"2026-01-21T08:30:21.798213-06:00","external_ref":"gh-1"}
{"id":"vitess-0e1.1","title":"[TDD Red] VTGate Single-Shard Query Routing Test Suite","description":"Create comprehensive test suite for VTGate single-shard query routing.\n\n## Test Cases\n\n### Shard Key Extraction\n- Extract shard key from WHERE clause equality conditions\n- Extract shard key from IN clauses (single value)\n- Handle missing shard key (should scatter or error based on config)\n- Handle NULL shard key values\n\n### Route Selection\n- Route to correct shard based on vindex hash\n- Route INSERT with explicit shard key\n- Route UPDATE with shard key in WHERE\n- Route DELETE with shard key in WHERE\n- Route SELECT with shard key equality\n\n### VSchema Integration\n- Parse table vschema to identify sharding column\n- Resolve vindex type for routing decisions\n- Handle unsharded tables (route to single shard)\n- Handle reference tables (route to any shard)\n\n### Edge Cases\n- Subqueries with shard keys\n- JOIN queries where both tables have same shard key\n- Prepared statements with shard key parameters\n\n## Success Criteria\nAll tests should fail initially (RED phase) as no implementation exists yet.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:28.125222-06:00","updated_at":"2026-01-21T14:33:28Z","external_ref":"gh-2"}
{"id":"vitess-0e1.10","title":"[TDD Green] Vindex Implementations","description":"Implement all Vindex types to pass all RED tests.\n\n## Implementation Requirements\n\n### Vindex Interface\n```typescript\ninterface Vindex {\n  type: string;\n  compute(value: unknown): Uint8Array;\n  mapToShard(keyspaceId: Uint8Array, shards: ShardRange[]): string;\n  verify?(value: unknown, keyspaceId: Uint8Array): boolean;\n}\n```\n\n### HashVindex Class\n- Use xxhash64 for hashing\n- Return 8-byte keyspace ID\n- Implement uniform distribution\n\n### ConsistentHashVindex Class\n- Extend HashVindex\n- Add virtual nodes for balance\n- Support weight configuration\n\n### RangeVindex Class\n- Configure range boundaries\n- Binary search for range lookup\n- Support custom comparators\n\n### LookupVindex Class\n- Query external lookup table\n- LRU cache with TTL\n- Batch query support\n- Owner verification\n\n## Files to Create\n- src/vindexes/interface.ts\n- src/vindexes/hash.ts\n- src/vindexes/consistent-hash.ts\n- src/vindexes/range.ts\n- src/vindexes/lookup.ts\n- src/vindexes/numeric.ts\n- src/vindexes/unicode.ts\n- src/vindexes/composite.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:39.197667-06:00","updated_at":"2026-01-21T08:32:39.197667-06:00","external_ref":"gh-3","dependencies":[{"issue_id":"vitess-0e1.10","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:39.198413-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.11","title":"[TDD Red] VTTablet (ShardDO) Query Handling Test Suite","description":"Create comprehensive test suite for VTTablet query handling.\n\n## Test Cases\n\n### Query Execution\n- Execute simple SELECT queries\n- Execute INSERT with returning clause\n- Execute UPDATE with affected rows count\n- Execute DELETE with affected rows count\n- Execute prepared statements with parameters\n\n### Query Validation\n- Reject queries targeting wrong shard\n- Validate shard key in INSERT matches shard\n- Validate UPDATE doesn't modify shard key\n- Block cross-shard operations\n\n### Result Serialization\n- Serialize result sets efficiently\n- Stream large result sets\n- Handle binary data types\n- Handle NULL values\n- Preserve type information\n\n### Query Parsing\n- Parse SQL to validate shard constraints\n- Extract table names for ACL checks\n- Identify read vs write operations\n\n### Connection Management\n- Handle connection pooling\n- Timeout long-running queries\n- Cancel queries on connection drop\n- Track active queries for debugging\n\n### Error Handling\n- Return structured error codes\n- Include query context in errors\n- Handle SQLite errors appropriately\n- Retry transient errors\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:40.462682-06:00","updated_at":"2026-01-21T08:32:40.462682-06:00","external_ref":"gh-4","dependencies":[{"issue_id":"vitess-0e1.11","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:40.463348-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.12","title":"[TDD Green] VTTablet (ShardDO) Query Handling Implementation","description":"Implement VTTablet query handling to pass all RED tests.\n\n## Implementation Requirements\n\n### ShardDO Class (Durable Object)\n- Implement fetch() handler for HTTP RPC\n- Route to query execution methods\n- Maintain SQLite connection\n\n### QueryExecutor Class\n- Execute queries against SQLite storage\n- Return typed results with metadata\n- Support streaming for large results\n\n### ShardConstraintValidator Class\n- Parse incoming query\n- Verify shard key matches this shard\n- Block disallowed operations\n\n### ResultSerializer Class\n- Efficient binary serialization\n- Support for all SQL types\n- Streaming serialization for large results\n\n### QueryMetrics\n- Track query latency\n- Track rows read/written\n- Track query patterns\n\n## Files to Create\n- src/vttablet/shard-do.ts\n- src/vttablet/query-executor.ts\n- src/vttablet/constraint-validator.ts\n- src/vttablet/result-serializer.ts\n- src/vttablet/metrics.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:41.559972-06:00","updated_at":"2026-01-21T08:32:41.559972-06:00","external_ref":"gh-5","dependencies":[{"issue_id":"vitess-0e1.12","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:41.560549-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.13","title":"[TDD Red] VTTablet Transaction Handling Test Suite","description":"Create comprehensive test suite for VTTablet transaction handling.\n\n## Test Cases\n\n### Transaction Lifecycle\n- BEGIN starts transaction\n- COMMIT persists changes\n- ROLLBACK discards changes\n- Auto-rollback on connection drop\n- Auto-rollback on timeout\n\n### Isolation Levels\n- Read committed behavior\n- Repeatable read behavior  \n- Serializable behavior\n- Verify isolation between concurrent txns\n\n### Savepoints\n- SAVEPOINT creates restore point\n- ROLLBACK TO SAVEPOINT restores\n- RELEASE SAVEPOINT removes point\n- Nested savepoints\n\n### Deadlock Detection\n- Detect simple deadlocks (A waits B, B waits A)\n- Detect complex deadlock cycles\n- Choose victim transaction\n- Return deadlock error to victim\n\n### Transaction Timeout\n- Configurable transaction timeout\n- Auto-rollback on timeout\n- Warning before timeout\n\n### Prepared Transactions (for 2PC)\n- PREPARE TRANSACTION marks ready\n- COMMIT PREPARED finalizes\n- ROLLBACK PREPARED aborts\n- Recover prepared after crash\n\n### Write-Ahead Log\n- WAL mode enabled\n- Checkpoint behavior\n- Recovery from WAL\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:42.488148-06:00","updated_at":"2026-01-21T08:32:42.488148-06:00","dependencies":[{"issue_id":"vitess-0e1.13","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:42.488944-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.14","title":"[TDD Green] VTTablet Transaction Handling Implementation","description":"Implement VTTablet transaction handling to pass all RED tests.\n\n## Implementation Requirements\n\n### TransactionManager Class\n- Track active transactions by ID\n- Manage transaction lifecycle\n- Handle timeouts and cleanup\n- Support isolation level configuration\n\n### Transaction Class\n- Encapsulate SQLite transaction\n- Track modifications for rollback\n- Support savepoints\n- Implement prepare/commit/rollback\n\n### DeadlockDetector Class\n- Build wait-for graph\n- Detect cycles in graph\n- Select victim by age/cost\n- Integrate with lock manager\n\n### LockManager Class\n- Row-level locking\n- Table-level locking\n- Lock escalation\n- Lock timeout handling\n\n### PreparedTransactionLog Class\n- Persist prepared transaction state\n- Recover on restart\n- Cleanup stale prepared txns\n\n## Files to Create\n- src/vttablet/transaction-manager.ts\n- src/vttablet/transaction.ts\n- src/vttablet/deadlock-detector.ts\n- src/vttablet/lock-manager.ts\n- src/vttablet/prepared-txn-log.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:43.476929-06:00","updated_at":"2026-01-21T08:32:43.476929-06:00","dependencies":[{"issue_id":"vitess-0e1.14","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:43.477713-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.15","title":"[TDD Red] VTTablet Storage Engine Switching Test Suite","description":"Create comprehensive test suite for VTTablet storage engine switching.\n\n## Test Cases\n\n### Storage Engine Interface\n- Define common interface for all engines\n- Test interface compliance for SQLite\n- Test interface compliance for DuckDB\n- Test interface compliance for PGlite\n\n### SQLite Engine\n- Basic CRUD operations\n- Transaction support\n- Index creation and usage\n- Full-text search (FTS5)\n- JSON functions\n\n### DuckDB Engine\n- OLAP query optimization\n- Columnar storage benefits\n- Vectorized execution\n- Parquet file integration\n\n### Engine Selection\n- Select engine based on query pattern\n- Select engine based on table config\n- Hot-swap engine at runtime\n- Migrate data between engines\n\n### Data Synchronization\n- Replicate writes to secondary engine\n- Eventual consistency guarantees\n- Conflict resolution\n\n### Performance Comparison\n- Benchmark OLTP on SQLite vs DuckDB\n- Benchmark OLAP on SQLite vs DuckDB\n- Benchmark mixed workloads\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:44.757731-06:00","updated_at":"2026-01-21T08:32:44.757731-06:00","dependencies":[{"issue_id":"vitess-0e1.15","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:44.758426-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.16","title":"[TDD Green] VTTablet Storage Engine Switching Implementation","description":"Implement VTTablet storage engine switching to pass all RED tests.\n\n## Implementation Requirements\n\n### StorageEngine Interface\n```typescript\ninterface StorageEngine {\n  execute(sql: string, params?: unknown[]): Promise<Result>;\n  beginTransaction(): Promise<Transaction>;\n  getCapabilities(): EngineCapabilities;\n  close(): Promise<void>;\n}\n```\n\n### SQLiteEngine Class\n- Wrap DO SQLite storage\n- Implement StorageEngine interface\n- Optimize for OLTP workloads\n\n### DuckDBEngine Class\n- Use DuckDB WASM\n- Implement StorageEngine interface\n- Optimize for OLAP workloads\n\n### EngineSelector Class\n- Analyze query to select engine\n- Use table hints for engine preference\n- Support query-level engine override\n\n### DataMigrator Class\n- Export data from source engine\n- Import data to target engine\n- Verify migration integrity\n\n## Files to Create\n- src/vttablet/engines/interface.ts\n- src/vttablet/engines/sqlite.ts\n- src/vttablet/engines/duckdb.ts\n- src/vttablet/engine-selector.ts\n- src/vttablet/data-migrator.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:46.069002-06:00","updated_at":"2026-01-21T08:32:46.069002-06:00","dependencies":[{"issue_id":"vitess-0e1.16","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:46.069608-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.17","title":"[TDD Red] Cross-Shard Transaction Coordination (2PC) Test Suite","description":"Create comprehensive test suite for cross-shard 2PC coordination.\n\n## Test Cases\n\n### Two-Phase Commit Protocol\n- Prepare phase: all participants vote\n- Commit phase: coordinator commits all\n- Abort on any prepare failure\n- Timeout handling in each phase\n\n### Coordinator Role\n- Coordinator initiates 2PC\n- Track participant states\n- Make commit/abort decision\n- Persist decision durably\n\n### Participant Role\n- Respond to prepare request\n- Hold locks during prepared state\n- Respond to commit/rollback\n- Recover prepared state after crash\n\n### Failure Scenarios\n- Coordinator fails before decision\n- Coordinator fails after decision\n- Participant fails before prepare response\n- Participant fails after prepare, before commit\n- Network partition during 2PC\n\n### Recovery\n- Coordinator recovery from log\n- Participant recovery asks coordinator\n- Heuristic resolution for orphaned txns\n- Manual intervention for stuck txns\n\n### Performance\n- Minimize round trips\n- Async prepare for parallelism\n- Early abort optimization\n- Read-only participant optimization\n\n### Saga Pattern Alternative\n- Compensating transactions\n- Saga state machine\n- Idempotent operations\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:47.295656-06:00","updated_at":"2026-01-21T08:32:47.295656-06:00","dependencies":[{"issue_id":"vitess-0e1.17","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:47.296247-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.18","title":"[TDD Green] Cross-Shard Transaction Coordination (2PC) Implementation","description":"Implement cross-shard 2PC coordination to pass all RED tests.\n\n## Implementation Requirements\n\n### TransactionCoordinator Class\n- Manage distributed transaction lifecycle\n- Send prepare requests to all shards\n- Collect votes and make decision\n- Send commit/rollback to all shards\n- Persist transaction log durably\n\n### TransactionParticipant Class\n- Handle prepare request\n- Acquire and hold locks\n- Persist prepared state\n- Handle commit/rollback\n- Support recovery queries\n\n### TransactionLog Class\n- Durable storage for coordinator state\n- Write-ahead logging for decisions\n- Support for recovery scanning\n- Garbage collection of old entries\n\n### RecoveryManager Class\n- Scan for incomplete transactions\n- Query coordinator for decision\n- Complete or rollback as needed\n- Handle coordinator unavailable\n\n### TwoPhaseCommitProtocol Class\n- Implement 2PC state machine\n- Timeout configuration\n- Retry logic with backoff\n- Metrics and tracing\n\n## Files to Create\n- src/vtgate/2pc/coordinator.ts\n- src/vtgate/2pc/participant.ts\n- src/vtgate/2pc/transaction-log.ts\n- src/vtgate/2pc/recovery-manager.ts\n- src/vtgate/2pc/protocol.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:48.417653-06:00","updated_at":"2026-01-21T08:32:48.417653-06:00","dependencies":[{"issue_id":"vitess-0e1.18","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:48.418259-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.2","title":"[TDD Green] VTGate Single-Shard Query Routing Implementation","description":"Implement VTGate single-shard query routing to pass all RED tests.\n\n## Implementation Requirements\n\n### ShardKeyExtractor Class\n- Parse SQL AST to find shard key conditions\n- Support equality, IN (single), and parameter markers\n- Return undefined when shard key not determinable\n\n### QueryRouter Class\n- Accept query + vschema + keyspace config\n- Use vindex to compute target shard\n- Return ShardRoute with shard name and rewritten query\n\n### VSchemaResolver\n- Load vschema definitions\n- Resolve table -> sharding column mapping\n- Resolve vindex type and parameters\n\n## Files to Create\n- src/vtgate/shard-key-extractor.ts\n- src/vtgate/query-router.ts\n- src/vtgate/vschema-resolver.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:28.996284-06:00","updated_at":"2026-01-21T08:32:28.996284-06:00","dependencies":[{"issue_id":"vitess-0e1.2","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:28.9969-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.3","title":"[TDD Red] VTGate Scatter-Gather Multi-Shard Test Suite","description":"Create comprehensive test suite for VTGate scatter-gather operations.\n\n## Test Cases\n\n### Scatter Query Detection\n- Detect queries without shard key (requires scatter)\n- Detect queries with IN clause spanning multiple shards\n- Detect range queries on shard key\n- Detect queries with OR conditions crossing shards\n\n### Parallel Execution\n- Fan out query to all shards in parallel\n- Collect results from all shards\n- Handle partial failures (some shards fail)\n- Timeout handling for slow shards\n- Cancel in-flight requests on first error (fail-fast mode)\n\n### Result Merging\n- Merge result sets from multiple shards\n- Preserve column metadata across shards\n- Handle empty results from some shards\n- Deduplicate rows when appropriate\n\n### ORDER BY Handling\n- Merge-sort results with ORDER BY\n- Handle multi-column ORDER BY\n- Handle ASC/DESC combinations\n- Preserve sort stability\n\n### LIMIT/OFFSET Handling\n- Push LIMIT to shards (over-fetch strategy)\n- Apply final LIMIT after merge\n- Handle OFFSET correctly with scatter\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:30.514792-06:00","updated_at":"2026-01-21T08:32:30.514792-06:00","dependencies":[{"issue_id":"vitess-0e1.3","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:30.515408-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.4","title":"[TDD Green] VTGate Scatter-Gather Multi-Shard Implementation","description":"Implement VTGate scatter-gather to pass all RED tests.\n\n## Implementation Requirements\n\n### ScatterGatherExecutor Class\n- Fan out queries to multiple ShardDO instances\n- Use Promise.all for parallel execution\n- Implement timeout and cancellation\n- Configurable fail-fast vs best-effort mode\n\n### ResultMerger Class\n- Stream-based merging for memory efficiency\n- Merge-sort implementation for ORDER BY\n- Column type coercion across shards\n\n### LimitOffsetHandler\n- Calculate per-shard limits (limit + offset)\n- Apply final limit/offset post-merge\n- Optimize for common cases\n\n## Files to Create\n- src/vtgate/scatter-gather.ts\n- src/vtgate/result-merger.ts\n- src/vtgate/limit-handler.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:31.711367-06:00","updated_at":"2026-01-21T08:32:31.711367-06:00","dependencies":[{"issue_id":"vitess-0e1.4","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:31.711991-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.5","title":"[TDD Red] VTGate Aggregation Functions Test Suite","description":"Create comprehensive test suite for VTGate aggregation across shards.\n\n## Test Cases\n\n### COUNT Aggregation\n- COUNT(*) across shards (sum of counts)\n- COUNT(column) excluding NULLs\n- COUNT(DISTINCT column) - requires dedup\n- COUNT with WHERE clause\n\n### SUM Aggregation\n- SUM across shards (sum of sums)\n- SUM with NULL handling\n- SUM with different numeric types\n- SUM overflow handling\n\n### AVG Aggregation\n- AVG requires SUM and COUNT from each shard\n- Compute weighted average correctly\n- Handle division by zero (no rows)\n- AVG with NULL exclusion\n\n### MIN/MAX Aggregation\n- MIN across shards (min of mins)\n- MAX across shards (max of maxes)\n- MIN/MAX with NULL handling\n- MIN/MAX on strings (collation)\n\n### GROUP BY with Aggregates\n- GROUP BY with COUNT\n- GROUP BY with multiple aggregates\n- GROUP BY on shard key (single shard)\n- GROUP BY on non-shard key (scatter + merge)\n\n### HAVING Clause\n- HAVING with aggregate conditions\n- HAVING applied post-merge\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:33.009658-06:00","updated_at":"2026-01-21T08:32:33.009658-06:00","dependencies":[{"issue_id":"vitess-0e1.5","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:33.010321-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.6","title":"[TDD Green] VTGate Aggregation Functions Implementation","description":"Implement VTGate aggregation to pass all RED tests.\n\n## Implementation Requirements\n\n### AggregateRewriter Class\n- Rewrite AVG to SUM + COUNT for scatter\n- Add hidden columns for aggregate computation\n- Track original vs rewritten expressions\n\n### AggregateMerger Class\n- COUNT: sum all shard counts\n- SUM: sum all shard sums\n- AVG: (sum of sums) / (sum of counts)\n- MIN: min of all shard mins\n- MAX: max of all shard maxes\n\n### GroupByMerger Class\n- Hash-based grouping of scattered results\n- Apply aggregate functions per group\n- Memory-bounded grouping with spill-to-disk option\n\n### HavingFilter Class\n- Evaluate HAVING conditions post-aggregation\n- Support aggregate references in HAVING\n\n## Files to Create\n- src/vtgate/aggregate-rewriter.ts\n- src/vtgate/aggregate-merger.ts\n- src/vtgate/group-by-merger.ts\n- src/vtgate/having-filter.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:34.209158-06:00","updated_at":"2026-01-21T08:32:34.209158-06:00","dependencies":[{"issue_id":"vitess-0e1.6","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:34.209865-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.7","title":"[TDD Red] VSchema Parsing and Validation Test Suite","description":"Create comprehensive test suite for VSchema parsing and validation.\n\n## Test Cases\n\n### JSON/YAML Parsing\n- Parse valid VSchema JSON\n- Parse valid VSchema YAML\n- Handle syntax errors gracefully\n- Support comments in YAML\n\n### Keyspace Definition\n- Parse sharded keyspace config\n- Parse unsharded keyspace config\n- Validate keyspace name format\n- Handle missing required fields\n\n### Table Definition\n- Parse table with column vindexes\n- Parse table with auto-increment\n- Parse reference table type\n- Parse sequence table type\n- Validate table references existing vindexes\n\n### Vindex Definition\n- Parse hash vindex\n- Parse consistent_lookup vindex\n- Parse custom vindex with params\n- Validate vindex type exists\n- Validate vindex params schema\n\n### Cross-Reference Validation\n- Tables reference defined vindexes\n- Lookup vindexes reference valid tables\n- No circular dependencies\n- Sequence tables exist for auto-increment\n\n### Schema Evolution\n- Validate schema migration compatibility\n- Detect breaking changes\n- Warn on risky changes\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:35.641002-06:00","updated_at":"2026-01-21T08:32:35.641002-06:00","dependencies":[{"issue_id":"vitess-0e1.7","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:35.641676-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.8","title":"[TDD Green] VSchema Parsing and Validation Implementation","description":"Implement VSchema parsing and validation to pass all RED tests.\n\n## Implementation Requirements\n\n### VSchemaParser Class\n- Support JSON and YAML input formats\n- Use zod for runtime validation\n- Produce typed VSchema AST\n\n### VSchemaValidator Class\n- Validate structural correctness\n- Validate cross-references\n- Collect all errors (not fail-fast)\n- Return ValidationResult with errors/warnings\n\n### VSchemaTypes\n- TypeScript types matching Vitess VSchema spec\n- Keyspace, Table, Vindex, ColumnVindex types\n- Support for all vindex types\n\n### VSchemaLoader\n- Load from file path\n- Load from R2 storage\n- Cache parsed schemas\n- Watch for changes (dev mode)\n\n## Files to Create\n- src/vschema/parser.ts\n- src/vschema/validator.ts\n- src/vschema/types.ts\n- src/vschema/loader.ts\n\n## Success Criteria\nAll tests from RED issue must pass (GREEN phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:36.890997-06:00","updated_at":"2026-01-21T08:32:36.890997-06:00","dependencies":[{"issue_id":"vitess-0e1.8","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:36.89162-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-0e1.9","title":"[TDD Red] Vindex Implementations Test Suite","description":"Create comprehensive test suite for all Vindex implementations.\n\n## Test Cases\n\n### Hash Vindex\n- Compute consistent hash for integers\n- Compute consistent hash for strings\n- Compute consistent hash for UUIDs\n- Verify hash distribution uniformity\n- Map hash to shard range\n\n### Consistent Hash Vindex\n- Use xxhash64 for performance\n- Verify consistent mapping (same input = same output)\n- Handle edge cases (empty string, zero, negative)\n\n### Range Vindex\n- Map value to range bucket\n- Handle boundary conditions\n- Support numeric ranges\n- Support date/time ranges\n\n### Lookup Vindex\n- Query lookup table for shard mapping\n- Cache lookup results\n- Handle lookup misses\n- Batch lookup for IN clauses\n- Verify lookup with owner table\n\n### Numeric Vindex\n- Direct numeric to shard mapping\n- Handle overflow conditions\n- Support signed and unsigned\n\n### Unicode Vindex\n- Normalize unicode before hashing\n- Handle different normalizations (NFC, NFD)\n- Collation-aware comparison\n\n### Composite Vindex\n- Combine multiple columns\n- Order-sensitive composition\n- NULL handling in composites\n\n## Success Criteria\nAll tests should fail initially (RED phase).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:38.00194-06:00","updated_at":"2026-01-21T08:32:38.00194-06:00","dependencies":[{"issue_id":"vitess-0e1.9","depends_on_id":"vitess-0e1","type":"parent-child","created_at":"2026-01-21T08:32:38.002586-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb","title":"Epic: @dotdo/vitess-sqlite - SQLite Storage Engine","description":"Turso/libSQL-based SQLite storage engine. Lightweight, edge-sync capable, accepts Postgres dialect with auto-translation.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T08:30:19.471437-06:00","updated_at":"2026-01-21T08:30:19.471437-06:00"}
{"id":"vitess-1bb.1","title":"[TDD Red] TursoAdapter initialization and lifecycle","description":"Create test suite defining expected behavior for TursoAdapter initialization and lifecycle.\n\n## Test Cases to Define\n\n1. **Constructor tests**\n   - Should accept Turso client configuration\n   - Should accept pre-configured Turso client instance\n   - Should throw on invalid configuration\n   - Should set default options when not provided\n\n2. **Connection lifecycle**\n   - Should establish connection on first query\n   - Should reuse existing connection\n   - Should handle connection errors gracefully\n   - Should support lazy initialization\n\n3. **Cleanup/disposal**\n   - Should close connection on dispose()\n   - Should handle multiple dispose() calls gracefully\n   - Should reject queries after disposal\n   - Should clean up resources properly\n\n4. **Health checks**\n   - Should report healthy when connected\n   - Should report unhealthy when disconnected\n   - Should support ping/healthcheck method\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/turso-adapter-lifecycle.test.ts`\n- [ ] No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:53.112477-06:00","updated_at":"2026-01-21T08:31:53.112477-06:00","dependencies":[{"issue_id":"vitess-1bb.1","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:53.113055-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.10","title":"[TDD Green] SQL dialect translation (Postgres -> SQLite)","description":"Implement SQL dialect translation to make tests pass.\n\n## Implementation Requirements\n\n1. **SQLTranslator class**\n   ```typescript\n   class SQLTranslator {\n     translate(sql: string): string\n     translateType(pgType: string): string\n   }\n   ```\n\n2. **Translation strategies**\n   - Regex-based simple replacements\n   - Token-based for complex patterns\n   - Type mapping table\n\n3. **Configuration**\n   - Enable/disable specific translations\n   - Strict mode (throw on unsupported)\n   - Logging for translations made\n\n## Acceptance Criteria\n- [ ] All translation tests passing (green)\n- [ ] SQLTranslator exported\n- [ ] Translation is idempotent\n\n## Dependencies\n- Depends on: [TDD Red] SQL dialect translation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:03.767574-06:00","updated_at":"2026-01-21T08:32:03.767574-06:00","dependencies":[{"issue_id":"vitess-1bb.10","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:03.768181-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.11","title":"[TDD Red] Parameter placeholder translation ($1 -> ?)","description":"Create test suite defining expected behavior for parameter placeholder translation.\n\n## Test Cases to Define\n\n1. **Basic placeholder translation**\n   - Should translate $1 to ?\n   - Should translate $1, $2, $3 to ?, ?, ?\n   - Should handle gaps ($1, $3) appropriately\n   - Should preserve parameter order\n\n2. **Complex queries**\n   - Should handle multiple occurrences of same placeholder\n   - Should work within string literals (NOT translate)\n   - Should work with quoted identifiers\n   - Should handle nested queries\n\n3. **Edge cases**\n   - Should handle $10+ (double digit placeholders)\n   - Should not translate $ in other contexts\n   - Should handle empty parameter list\n   - Should handle mixed $n and literal $ signs\n\n4. **Parameter array transformation**\n   - Should reorder params array if needed\n   - Should handle repeated placeholder usage\n   - Should validate param count matches\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/param-translator.test.ts`\n- [ ] Edge cases well documented","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:05.128996-06:00","updated_at":"2026-01-21T08:32:05.128996-06:00","dependencies":[{"issue_id":"vitess-1bb.11","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:05.129635-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.12","title":"[TDD Green] Parameter placeholder translation ($1 -> ?)","description":"Implement parameter placeholder translation to make tests pass.\n\n## Implementation Requirements\n\n1. **ParamTranslator class**\n   ```typescript\n   class ParamTranslator {\n     translate(sql: string): { sql: string; paramOrder: number[] }\n     reorderParams(params: unknown[], order: number[]): unknown[]\n   }\n   ```\n\n2. **Translation logic**\n   - Parse $n placeholders\n   - Replace with ? in order\n   - Track original positions\n   - Handle string literal avoidance\n\n3. **Integration with adapter**\n   - Auto-translate on query/execute\n   - Optional bypass for raw SQLite queries\n\n## Acceptance Criteria\n- [ ] All parameter tests passing (green)\n- [ ] ParamTranslator exported\n- [ ] Works with SQLTranslator\n\n## Dependencies\n- Depends on: [TDD Green] SQL dialect translation\n- Depends on: [TDD Red] Parameter placeholder translation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:06.893291-06:00","updated_at":"2026-01-21T08:32:06.893291-06:00","dependencies":[{"issue_id":"vitess-1bb.12","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:06.894187-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.13","title":"[TDD Green] TursoAdapter error handling","description":"Implement error handling to make tests pass.\n\n## Implementation Requirements\n\n1. **Custom error classes**\n   ```typescript\n   class VitessError extends Error { cause?: Error }\n   class QueryError extends VitessError { sql: string; params?: unknown[] }\n   class ConnectionError extends VitessError { retryable: boolean }\n   class ConstraintError extends QueryError { constraint: string; type: ConstraintType }\n   ```\n\n2. **Error wrapping**\n   - Catch Turso errors\n   - Parse error messages\n   - Add context\n   - Preserve stack traces\n\n3. **Error codes**\n   - Define error code enum\n   - Map SQLite codes to Vitess codes\n   - Include in all errors\n\n## Acceptance Criteria\n- [ ] All error tests passing (green)\n- [ ] Error classes exported\n- [ ] Errors are informative and actionable\n\n## Dependencies\n- Depends on: [TDD Green] TursoAdapter transaction support\n- Depends on: [TDD Red] TursoAdapter error handling","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:09.489151-06:00","updated_at":"2026-01-21T08:32:09.489151-06:00","dependencies":[{"issue_id":"vitess-1bb.13","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:09.490044-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.14","title":"[TDD Red] TursoAdapter error handling","description":"Create test suite defining expected behavior for error handling.\n\n## Test Cases to Define\n\n1. **SQL errors**\n   - Should wrap syntax errors with context\n   - Should include original SQL in error\n   - Should include parameter values (sanitized)\n   - Should identify error position if available\n\n2. **Connection errors**\n   - Should handle connection refused\n   - Should handle timeout errors\n   - Should handle authentication failures\n   - Should support retry configuration\n\n3. **Constraint errors**\n   - Should identify UNIQUE constraint violations\n   - Should identify FOREIGN KEY violations\n   - Should identify NOT NULL violations\n   - Should identify CHECK constraint failures\n\n4. **Error types**\n   - Should use custom error classes\n   - Should preserve original error as cause\n   - Should include error codes\n   - Should be serializable\n\n5. **Recovery**\n   - Should allow retry after transient errors\n   - Should reconnect after connection loss\n   - Should maintain state consistency after errors\n\n## Acceptance Criteria\n- All test cases written and failing (red)\n- Tests use vitest\n- Tests are in src/__tests__/turso-adapter-errors.test.ts\n- Error scenarios well documented","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:15.588876-06:00","updated_at":"2026-01-21T08:32:15.588876-06:00","dependencies":[{"issue_id":"vitess-1bb.14","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:15.589637-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.2","title":"[TDD Green] TursoAdapter initialization and lifecycle","description":"Implement TursoAdapter initialization and lifecycle to make tests pass.\n\n## Implementation Requirements\n\n1. **TursoAdapter class**\n   - Constructor accepting config or client\n   - Lazy connection initialization\n   - Connection state management\n\n2. **Lifecycle methods**\n   - `connect()` - establish connection\n   - `dispose()` / `close()` - cleanup\n   - `isConnected()` - state check\n   - `healthCheck()` - ping database\n\n3. **Error handling**\n   - Connection failure handling\n   - Configuration validation\n   - State transition guards\n\n## Acceptance Criteria\n- [ ] All lifecycle tests passing (green)\n- [ ] No new functionality beyond tests\n- [ ] Code follows project conventions\n- [ ] Types exported properly\n\n## Dependencies\n- Depends on: [TDD Red] TursoAdapter initialization and lifecycle","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:54.017969-06:00","updated_at":"2026-01-21T08:31:54.017969-06:00","dependencies":[{"issue_id":"vitess-1bb.2","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:54.018784-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.3","title":"[TDD Red] TursoAdapter query execution (SELECT)","description":"Create test suite defining expected behavior for SELECT query execution.\n\n## Test Cases to Define\n\n1. **Basic SELECT**\n   - Should execute simple SELECT query\n   - Should return rows as array of objects\n   - Should handle empty result sets\n   - Should preserve column names\n\n2. **Parameterized queries**\n   - Should bind positional parameters\n   - Should handle null parameters\n   - Should handle various data types (string, number, boolean, null, blob)\n   - Should reject missing parameters\n\n3. **Result handling**\n   - Should return correct row count\n   - Should include column metadata\n   - Should handle large result sets\n   - Should stream results when requested\n\n4. **Query variations**\n   - Should handle JOINs\n   - Should handle subqueries\n   - Should handle aggregations (COUNT, SUM, etc.)\n   - Should handle ORDER BY and LIMIT\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/turso-adapter-select.test.ts`\n- [ ] Mock Turso client used for unit tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:54.89596-06:00","updated_at":"2026-01-21T08:31:54.89596-06:00","dependencies":[{"issue_id":"vitess-1bb.3","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:54.89661-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.4","title":"[TDD Green] TursoAdapter query execution (SELECT)","description":"Implement SELECT query execution to make tests pass.\n\n## Implementation Requirements\n\n1. **Query method**\n   - `query<T>(sql: string, params?: unknown[]): Promise<QueryResult<T>>`\n   - Parameter binding\n   - Result transformation\n\n2. **QueryResult interface**\n   - `rows: T[]`\n   - `rowCount: number`\n   - `columns: ColumnMetadata[]`\n\n3. **Type handling**\n   - SQLite type to JS type mapping\n   - Null handling\n   - Blob/Buffer handling\n\n## Acceptance Criteria\n- [ ] All SELECT tests passing (green)\n- [ ] QueryResult type exported\n- [ ] Proper TypeScript generics\n\n## Dependencies\n- Depends on: [TDD Green] TursoAdapter initialization and lifecycle\n- Depends on: [TDD Red] TursoAdapter query execution (SELECT)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:55.683546-06:00","updated_at":"2026-01-21T08:31:55.683546-06:00","dependencies":[{"issue_id":"vitess-1bb.4","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:55.684182-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.5","title":"[TDD Red] TursoAdapter write execution (INSERT/UPDATE/DELETE)","description":"Create test suite defining expected behavior for write operations.\n\n## Test Cases to Define\n\n1. **INSERT operations**\n   - Should insert single row\n   - Should insert with RETURNING clause\n   - Should return lastInsertRowId\n   - Should handle auto-increment columns\n   - Should insert multiple rows (batch)\n\n2. **UPDATE operations**\n   - Should update matching rows\n   - Should return affected row count\n   - Should handle UPDATE with RETURNING\n   - Should handle UPDATE with no matches (0 affected)\n\n3. **DELETE operations**\n   - Should delete matching rows\n   - Should return affected row count\n   - Should handle DELETE with no matches\n   - Should support DELETE with RETURNING\n\n4. **Write result handling**\n   - Should return changes count\n   - Should return lastInsertRowId for INSERTs\n   - Should handle RETURNING clause results\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/turso-adapter-write.test.ts`\n- [ ] Tests cover edge cases","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:56.879527-06:00","updated_at":"2026-01-21T08:31:56.879527-06:00","dependencies":[{"issue_id":"vitess-1bb.5","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:56.882658-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.6","title":"[TDD Green] TursoAdapter write execution (INSERT/UPDATE/DELETE)","description":"Implement write operations to make tests pass.\n\n## Implementation Requirements\n\n1. **Execute method**\n   - `execute(sql: string, params?: unknown[]): Promise<ExecuteResult>`\n   - Handle INSERT/UPDATE/DELETE\n   - Return affected rows and lastInsertRowId\n\n2. **ExecuteResult interface**\n   - `changes: number`\n   - `lastInsertRowId: number | bigint`\n   - `rows?: T[]` (for RETURNING)\n\n3. **Batch operations**\n   - `executeBatch(statements: Statement[]): Promise<ExecuteResult[]>`\n   - Atomic batch execution\n\n## Acceptance Criteria\n- [ ] All write tests passing (green)\n- [ ] ExecuteResult type exported\n- [ ] Batch operations working\n\n## Dependencies\n- Depends on: [TDD Green] TursoAdapter query execution (SELECT)\n- Depends on: [TDD Red] TursoAdapter write execution","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:58.017637-06:00","updated_at":"2026-01-21T08:31:58.017637-06:00","dependencies":[{"issue_id":"vitess-1bb.6","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:58.018289-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.7","title":"[TDD Red] TursoAdapter transaction support","description":"Create test suite defining expected behavior for transaction support.\n\n## Test Cases to Define\n\n1. **Basic transactions**\n   - Should begin transaction\n   - Should commit transaction\n   - Should rollback transaction\n   - Should auto-rollback on error\n\n2. **Transaction isolation**\n   - Should isolate changes until commit\n   - Should discard changes on rollback\n   - Should handle nested transaction callbacks\n\n3. **Transaction API**\n   - Should support `transaction(fn)` callback pattern\n   - Should pass transaction client to callback\n   - Should return callback result on success\n   - Should propagate callback errors\n\n4. **Transaction edge cases**\n   - Should handle transaction timeout\n   - Should prevent concurrent transactions\n   - Should handle connection loss during transaction\n   - Should support savepoints (if available)\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/turso-adapter-transaction.test.ts`\n- [ ] Tests verify isolation behavior","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:59.395333-06:00","updated_at":"2026-01-21T08:31:59.395333-06:00","dependencies":[{"issue_id":"vitess-1bb.7","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:31:59.396092-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.8","title":"[TDD Green] TursoAdapter transaction support","description":"Implement transaction support to make tests pass.\n\n## Implementation Requirements\n\n1. **Transaction method**\n   ```typescript\n   transaction<T>(fn: (tx: TransactionClient) => Promise<T>): Promise<T>\n   ```\n\n2. **TransactionClient interface**\n   - `query()` - same as adapter\n   - `execute()` - same as adapter\n   - `rollback()` - explicit rollback\n\n3. **Transaction management**\n   - BEGIN/COMMIT/ROLLBACK handling\n   - Error-triggered rollback\n   - Proper cleanup on all paths\n\n## Acceptance Criteria\n- [ ] All transaction tests passing (green)\n- [ ] TransactionClient type exported\n- [ ] Proper error propagation\n\n## Dependencies\n- Depends on: [TDD Green] TursoAdapter write execution\n- Depends on: [TDD Red] TursoAdapter transaction support","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:00.964151-06:00","updated_at":"2026-01-21T08:32:00.964151-06:00","dependencies":[{"issue_id":"vitess-1bb.8","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:00.964855-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-1bb.9","title":"[TDD Red] SQL dialect translation (Postgres -> SQLite)","description":"Create test suite defining expected behavior for SQL dialect translation.\n\n## Test Cases to Define\n\n1. **Type translations**\n   - Should translate SERIAL to INTEGER PRIMARY KEY AUTOINCREMENT\n   - Should translate BIGSERIAL to INTEGER PRIMARY KEY AUTOINCREMENT\n   - Should translate VARCHAR(n) to TEXT\n   - Should translate BOOLEAN to INTEGER\n   - Should translate TIMESTAMP to TEXT\n   - Should translate JSONB/JSON to TEXT\n\n2. **Syntax translations**\n   - Should translate ILIKE to LIKE with LOWER()\n   - Should translate || string concat (compatible)\n   - Should translate NOW() to datetime('now')\n   - Should translate CURRENT_TIMESTAMP appropriately\n   - Should handle RETURNING clause compatibility\n\n3. **Function translations**\n   - Should translate COALESCE (compatible)\n   - Should translate EXTRACT to strftime\n   - Should translate DATE_TRUNC to date/time functions\n   - Should translate string functions (LENGTH, UPPER, LOWER)\n\n4. **Unsupported features**\n   - Should throw/warn on ARRAY types\n   - Should throw/warn on window functions (if unsupported)\n   - Should handle CTEs appropriately\n\n## Acceptance Criteria\n- [ ] All test cases written and failing (red)\n- [ ] Tests use vitest\n- [ ] Tests are in `src/__tests__/sql-translator.test.ts`\n- [ ] Clear mapping documentation in tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:02.497256-06:00","updated_at":"2026-01-21T08:32:02.497256-06:00","dependencies":[{"issue_id":"vitess-1bb.9","depends_on_id":"vitess-1bb","type":"parent-child","created_at":"2026-01-21T08:32:02.498095-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1","title":"Epic: @dotdo/vitess-rpc - RPC Protocol & Types","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T08:30:07.92559-06:00","updated_at":"2026-01-21T08:30:07.92559-06:00"}
{"id":"vitess-7y1.1","title":"[TDD Red] Unified types - QueryResult, ExecuteResult, Row, Field","description":"Create test suite defining expected behavior for unified types in @dotdo/vitess-rpc.\n\n## Test Coverage\n\n### QueryResult Type Tests\n- Should have fields: rows, rowsAffected, insertId, fields\n- Should support optional fields array\n- Should handle empty result sets\n- Should type rows as Row[]\n\n### ExecuteResult Type Tests\n- Should extend QueryResult with session info\n- Should include error field for partial failures\n- Should support batch execution results\n\n### Row Type Tests\n- Should be indexable by field name\n- Should support typed value access\n- Should handle null values correctly\n\n### Field Type Tests\n- Should have name, type, table properties\n- Should support all MySQL field types\n- Should include charset and flags\n\n## Acceptance Criteria\n- [ ] All type tests compile with strict TypeScript\n- [ ] Tests fail initially (no implementation)\n- [ ] Tests document expected type shapes via type assertions\n- [ ] Tests use vitest type testing utilities","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:38.88921-06:00","updated_at":"2026-01-21T08:31:38.88921-06:00","dependencies":[{"issue_id":"vitess-7y1.1","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:38.889834-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.10","title":"[TDD Green] Request/Response factory functions","description":"Implement factory functions to make test suite pass.\n\n## Implementation\n\n### Functions to Implement\n- createExecuteRequest(query, target, options?)\n- createExecuteResponse(requestId, result | error)\n- createBatchRequest(queries, target, options?)\n- createBatchResponse(requestId, results)\n- createStreamChunk(requestId, data, sequence, isFinal)\n- createTarget(keyspace, shard?, tabletType?)\n- createBindVariables(params)\n- createSession(options?)\n- createError(code, message, details?)\n\n### Requirements\n- Export from src/factories.ts\n- Generate UUIDs for message IDs\n- Validate inputs at runtime\n- Full TypeScript inference\n\n## Acceptance Criteria\n- [ ] All RED tests pass\n- [ ] Factories produce valid messages\n- [ ] Type inference works correctly\n- [ ] Runtime validation in place\n\n## Depends On\n- [TDD Red] Request/Response factory functions issue\n- [TDD Green] RPC Message types issue","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:52.026331-06:00","updated_at":"2026-01-21T08:31:52.026331-06:00","dependencies":[{"issue_id":"vitess-7y1.10","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:52.026965-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.2","title":"[TDD Green] Unified types - QueryResult, ExecuteResult, Row, Field","description":"Implement unified types to make test suite pass.\n\n## Implementation\n\n### Types to Implement\n- QueryResult<T = Row>\n- ExecuteResult<T = Row>\n- Row (generic record type)\n- Field (column metadata)\n- Value (union of supported value types)\n\n### Requirements\n- Export from src/types.ts\n- Re-export from package index\n- Full JSDoc documentation\n- Strict TypeScript compliance\n\n## Acceptance Criteria\n- [ ] All RED tests pass\n- [ ] Types exported correctly\n- [ ] No any types used\n- [ ] Documentation complete\n\n## Depends On\n- [TDD Red] Unified types issue","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:40.487645-06:00","updated_at":"2026-01-21T08:31:40.487645-06:00","dependencies":[{"issue_id":"vitess-7y1.2","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:40.488482-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.3","title":"[TDD Red] VSchema types - Keyspace, VindexDef, TableDef","description":"Create test suite defining expected behavior for VSchema types in @dotdo/vitess-rpc.\n\n## Test Coverage\n\n### Keyspace Type Tests\n- Should have name and sharded boolean\n- Should contain vindexes map\n- Should contain tables map\n- Should support sequence definitions\n\n### VindexDef Type Tests\n- Should have type field (hash, lookup, etc.)\n- Should support owner table reference\n- Should include params map\n- Should handle write-only vindexes\n\n### TableDef Type Tests\n- Should reference column vindexes\n- Should support auto-increment sequences\n- Should define pinned tablet type\n- Should handle column list vindexes\n\n### Shard Type Tests\n- Should have key range (start/end)\n- Should reference primary tablet\n- Should track serving state\n\n## Acceptance Criteria\n- [ ] All type tests compile with strict TypeScript\n- [ ] Tests fail initially (no implementation)\n- [ ] Tests cover Vitess VSchema specification\n- [ ] Tests validate nested type relationships","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:41.845357-06:00","updated_at":"2026-01-21T08:31:41.845357-06:00","dependencies":[{"issue_id":"vitess-7y1.3","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:41.846081-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.4","title":"[TDD Green] VSchema types - Keyspace, VindexDef, TableDef","description":"Implement VSchema types to make test suite pass.\n\n## Implementation\n\n### Types to Implement\n- Keyspace\n- VindexDef\n- TableDef\n- ColumnVindex\n- Shard\n- KeyRange\n- AutoIncrement\n- Sequence\n\n### Requirements\n- Export from src/vschema-types.ts\n- Match Vitess protobuf definitions\n- Support JSON serialization\n- Full type safety\n\n## Acceptance Criteria\n- [ ] All RED tests pass\n- [ ] Types match Vitess VSchema spec\n- [ ] Proper optional field handling\n- [ ] Documentation complete\n\n## Depends On\n- [TDD Red] VSchema types issue","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:43.07124-06:00","updated_at":"2026-01-21T08:31:43.07124-06:00","dependencies":[{"issue_id":"vitess-7y1.4","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:43.071932-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.5","title":"[TDD Red] RPC Message types and protocol","description":"Create test suite defining expected behavior for RPC message types in @dotdo/vitess-rpc.\n\n## Test Coverage\n\n### Message Envelope Tests\n- Should have id, type, timestamp fields\n- Should support correlation IDs for request/response\n- Should include version field for protocol evolution\n\n### Request Message Tests\n- Should support Execute, StreamExecute, Batch\n- Should include target (keyspace, shard, tablet type)\n- Should carry query and bind variables\n- Should support transaction IDs\n\n### Response Message Tests\n- Should include success/error discriminator\n- Should carry result payload\n- Should support streaming chunks\n- Should include timing metadata\n\n### Error Message Tests\n- Should have code, message, detail fields\n- Should map to MySQL error codes\n- Should support retry hints\n- Should include stack trace in debug mode\n\n## Acceptance Criteria\n- [ ] All type tests compile\n- [ ] Tests define complete protocol surface\n- [ ] Tests cover error scenarios\n- [ ] Tests validate message versioning","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:44.734432-06:00","updated_at":"2026-01-21T08:31:44.734432-06:00","dependencies":[{"issue_id":"vitess-7y1.5","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:44.735337-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.6","title":"[TDD Green] RPC Message types and protocol","description":"Implement RPC message types to make test suite pass.\n\n## Implementation\n\n### Types to Implement\n- MessageEnvelope\n- ExecuteRequest / ExecuteResponse\n- StreamExecuteRequest / StreamExecuteResponse\n- BatchRequest / BatchResponse\n- BeginRequest / BeginResponse\n- CommitRequest / CommitResponse\n- RollbackRequest / RollbackResponse\n- RPCError\n- Target\n\n### Requirements\n- Export from src/messages.ts\n- Support discriminated unions\n- Enable exhaustive matching\n- Protocol version constants\n\n## Acceptance Criteria\n- [ ] All RED tests pass\n- [ ] Message types support all RPC operations\n- [ ] Discriminated unions work correctly\n- [ ] Version constants exported\n\n## Depends On\n- [TDD Red] RPC Message types issue","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:45.741495-06:00","updated_at":"2026-01-21T08:31:45.741495-06:00","dependencies":[{"issue_id":"vitess-7y1.6","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:45.742615-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.7","title":"[TDD Red] Message serialization/deserialization","description":"Create test suite defining expected behavior for message serialization in @dotdo/vitess-rpc.\n\n## Test Coverage\n\n### Serialize Function Tests\n- Should convert message to Uint8Array\n- Should handle all message types\n- Should preserve field types (bigint, Date, etc.)\n- Should be deterministic (same input = same output)\n\n### Deserialize Function Tests\n- Should reconstruct message from Uint8Array\n- Should validate message structure\n- Should throw on invalid/corrupt data\n- Should handle unknown message versions gracefully\n\n### Round-trip Tests\n- Should preserve all fields through serialize/deserialize\n- Should handle edge cases (empty arrays, null values)\n- Should maintain type information\n- Should handle large payloads efficiently\n\n### Binary Format Tests\n- Should use efficient encoding (MessagePack or similar)\n- Should support streaming deserialization\n- Should handle endianness correctly\n- Should include length prefix for framing\n\n## Acceptance Criteria\n- [ ] Tests define serialization contract\n- [ ] Tests cover error handling\n- [ ] Tests include performance assertions\n- [ ] Tests validate binary format spec","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:47.711081-06:00","updated_at":"2026-01-21T08:31:47.711081-06:00","dependencies":[{"issue_id":"vitess-7y1.7","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:47.711704-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.8","title":"[TDD Green] Message serialization/deserialization","description":"Implement message serialization to make test suite pass.\n\n## Implementation\n\n### Functions to Implement\n- serialize<T extends Message>(message: T): Uint8Array\n- deserialize<T extends Message>(data: Uint8Array): T\n- serializeToStream(message: Message): ReadableStream\n- deserializeFromStream(stream: ReadableStream): AsyncIterable<Message>\n\n### Requirements\n- Export from src/serialization.ts\n- Use MessagePack or CBOR encoding\n- Support streaming for large results\n- Include length framing\n\n### Performance Targets\n- Serialize 1000 rows in < 10ms\n- Deserialize 1000 rows in < 15ms\n- Memory efficient streaming\n\n## Acceptance Criteria\n- [ ] All RED tests pass\n- [ ] Streaming support works\n- [ ] Performance targets met\n- [ ] Error handling robust\n\n## Depends On\n- [TDD Red] Message serialization issue\n- [TDD Green] RPC Message types issue","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:49.141865-06:00","updated_at":"2026-01-21T08:31:49.141865-06:00","dependencies":[{"issue_id":"vitess-7y1.8","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:49.142456-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-7y1.9","title":"[TDD Red] Request/Response factory functions","description":"Create test suite defining expected behavior for factory functions in @dotdo/vitess-rpc.\n\n## Test Coverage\n\n### createExecuteRequest Tests\n- Should create valid ExecuteRequest with required fields\n- Should auto-generate message ID\n- Should set timestamp automatically\n- Should accept optional bind variables\n- Should validate target keyspace\n\n### createExecuteResponse Tests\n- Should create success response with result\n- Should create error response with RPCError\n- Should correlate with request ID\n- Should include timing metadata\n\n### createBatchRequest Tests\n- Should accept array of queries\n- Should share transaction context\n- Should support mixed read/write\n\n### createStreamChunk Tests\n- Should create chunk with sequence number\n- Should mark final chunk correctly\n- Should include partial results\n\n### Helper Function Tests\n- createTarget(keyspace, shard?, tabletType?)\n- createBindVariables(params: Record<string, Value>)\n- createSession(options?)\n\n## Acceptance Criteria\n- [ ] Tests define factory function signatures\n- [ ] Tests validate auto-generated fields\n- [ ] Tests cover error creation\n- [ ] Tests ensure type safety","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:50.371643-06:00","updated_at":"2026-01-21T08:31:50.371643-06:00","dependencies":[{"issue_id":"vitess-7y1.9","depends_on_id":"vitess-7y1","type":"parent-child","created_at":"2026-01-21T08:31:50.372296-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p","title":"Epic: vitess.do Website & Managed Service","description":"Marketing website, documentation, dashboard, and managed service infrastructure for vitess.do.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-21T08:30:23.273914-06:00","updated_at":"2026-01-21T08:30:23.273914-06:00"}
{"id":"vitess-h6p.1","title":"[Write] Main README.md","description":"Create initial draft of the main README.md for the vitess monorepo. Include: project overview, key features, quick start, installation, basic usage examples, links to packages and documentation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:07.261858-06:00","updated_at":"2026-01-21T08:31:07.261858-06:00","dependencies":[{"issue_id":"vitess-h6p.1","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:07.262555-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.10","title":"[Write] vitess-postgres Package README","description":"Create initial draft of README for vitess-postgres package. Cover: PostgreSQL wire protocol support, connection handling, query routing, transaction support, PgBouncer compatibility.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:29.468269-06:00","updated_at":"2026-01-21T08:31:29.468269-06:00","dependencies":[{"issue_id":"vitess-h6p.10","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:29.469068-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.11","title":"[Rewrite] vitess-postgres Package README","description":"Final polish of vitess-postgres package README. Production-ready documentation for PostgreSQL users migrating to vitess.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:31.856723-06:00","updated_at":"2026-01-21T08:31:31.856723-06:00","dependencies":[{"issue_id":"vitess-h6p.11","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:31.85736-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.12","title":"[Edit] vitess-postgres Package README","description":"Review and refine vitess-postgres package README. Verify PostgreSQL compatibility claims, add connection string examples, document limitations.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:39.389567-06:00","updated_at":"2026-01-21T08:31:39.389567-06:00","dependencies":[{"issue_id":"vitess-h6p.12","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:39.390156-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.13","title":"[Write] vitess-sqlite Package README","description":"Create initial draft of README for vitess-sqlite package. Cover: SQLite compatibility layer, D1 integration, local development support, query translation, embedded database features.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:40.977393-06:00","updated_at":"2026-01-21T08:31:40.977393-06:00","dependencies":[{"issue_id":"vitess-h6p.13","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:40.977992-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.14","title":"[Edit] vitess-sqlite Package README","description":"Review and refine vitess-sqlite package README. Verify SQLite dialect support, D1 examples, local development workflow documentation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:42.204661-06:00","updated_at":"2026-01-21T08:31:42.204661-06:00","dependencies":[{"issue_id":"vitess-h6p.14","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:42.20856-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.15","title":"[Rewrite] vitess-sqlite Package README","description":"Final polish of vitess-sqlite package README. Clear documentation for SQLite/D1 users with practical examples.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:43.428989-06:00","updated_at":"2026-01-21T08:31:43.428989-06:00","dependencies":[{"issue_id":"vitess-h6p.15","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:43.429786-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.16","title":"[Write] Getting Started Guide","description":"Create initial draft of Getting Started guide. Cover: prerequisites, installation, first project setup, basic sharding configuration, running locally, deploying to Cloudflare Workers.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:55.202495-06:00","updated_at":"2026-01-21T08:31:55.202495-06:00","dependencies":[{"issue_id":"vitess-h6p.16","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:55.203091-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.17","title":"[Edit] Getting Started Guide","description":"Review and refine Getting Started guide. Test all steps from scratch, fix any gaps, improve clarity for newcomers, add troubleshooting section.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:56.315124-06:00","updated_at":"2026-01-21T08:31:56.315124-06:00","dependencies":[{"issue_id":"vitess-h6p.17","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:56.315706-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.18","title":"[Rewrite] Getting Started Guide","description":"Final polish of Getting Started guide. Ensure smooth onboarding experience, clear progression, professional documentation quality.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:57.721637-06:00","updated_at":"2026-01-21T08:31:57.721637-06:00","dependencies":[{"issue_id":"vitess-h6p.18","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:57.722354-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.19","title":"[Write] API Documentation","description":"Create initial draft of API documentation. Document all public APIs across packages: classes, methods, interfaces, types, configuration options, return values, error types.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:58.945274-06:00","updated_at":"2026-01-21T08:31:58.945274-06:00","dependencies":[{"issue_id":"vitess-h6p.19","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:58.945917-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.2","title":"[Edit] Main README.md","description":"Review and refine the main README.md draft. Check for clarity, accuracy, completeness. Ensure code examples work. Verify links. Improve formatting and flow.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:08.396311-06:00","updated_at":"2026-01-21T08:31:08.396311-06:00","dependencies":[{"issue_id":"vitess-h6p.2","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:08.396988-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.20","title":"[Edit] API Documentation","description":"Review and refine API documentation. Verify all signatures match implementation, add missing parameters, improve examples, ensure TypeScript types are accurate.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:00.360295-06:00","updated_at":"2026-01-21T08:32:00.360295-06:00","dependencies":[{"issue_id":"vitess-h6p.20","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:00.360883-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.21","title":"[Rewrite] API Documentation","description":"Final polish of API documentation. Consistent formatting, comprehensive coverage, reference-quality documentation ready for developer use.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:01.265612-06:00","updated_at":"2026-01-21T08:32:01.265612-06:00","dependencies":[{"issue_id":"vitess-h6p.21","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:01.266202-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.22","title":"[Write] Architecture Documentation","description":"Create initial draft of Architecture documentation. Cover: system design, sharding strategy, query routing, VTGate/VTTablet concepts, Durable Objects integration, data flow diagrams, component interactions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:13.345096-06:00","updated_at":"2026-01-21T08:32:13.345096-06:00","dependencies":[{"issue_id":"vitess-h6p.22","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:13.345688-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.23","title":"[Edit] Architecture Documentation","description":"Review and refine Architecture documentation. Verify diagrams are accurate, improve technical explanations, add decision rationale, ensure consistency with implementation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:15.033769-06:00","updated_at":"2026-01-21T08:32:15.033769-06:00","dependencies":[{"issue_id":"vitess-h6p.23","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:15.034383-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.24","title":"[Rewrite] Architecture Documentation","description":"Final polish of Architecture documentation. Publication-quality technical documentation suitable for technical blog posts and conference talks.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:15.83919-06:00","updated_at":"2026-01-21T08:32:15.83919-06:00","dependencies":[{"issue_id":"vitess-h6p.24","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:15.83982-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.25","title":"[Write] Migration Guide","description":"Create initial draft of Migration guide from other sharding solutions. Cover: migrating from Vitess, Citus, ProxySQL, manual sharding. Include: schema mapping, data migration strategies, testing approaches, rollback plans.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:16.63973-06:00","updated_at":"2026-01-21T08:32:16.63973-06:00","dependencies":[{"issue_id":"vitess-h6p.25","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:16.640505-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.26","title":"[Edit] Migration Guide","description":"Review and refine Migration guide. Verify migration steps for each source system, add real-world examples, improve risk mitigation guidance, add timeline estimates.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:18.057266-06:00","updated_at":"2026-01-21T08:32:18.057266-06:00","dependencies":[{"issue_id":"vitess-h6p.26","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:18.060926-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.27","title":"[Rewrite] Migration Guide","description":"Final polish of Migration guide. Enterprise-ready documentation that gives teams confidence to migrate production workloads.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:18.91988-06:00","updated_at":"2026-01-21T08:32:18.91988-06:00","dependencies":[{"issue_id":"vitess-h6p.27","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:18.920591-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.28","title":"[Write] vitess.do Landing Page Copy","description":"Create initial draft of vitess.do landing page copy. Include: hero section, value proposition, feature highlights, use cases, performance claims, pricing tiers, call-to-action, social proof placeholders.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:29.847555-06:00","updated_at":"2026-01-21T08:32:29.847555-06:00","dependencies":[{"issue_id":"vitess-h6p.28","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:29.848243-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.29","title":"[Edit] vitess.do Landing Page Copy","description":"Review and refine vitess.do landing page copy. Improve messaging clarity, verify claims are substantiated, enhance persuasive elements, A/B test headline options.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:30.925285-06:00","updated_at":"2026-01-21T08:32:30.925285-06:00","dependencies":[{"issue_id":"vitess-h6p.29","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:30.925881-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.3","title":"[Rewrite] Main README.md","description":"Final polish of main README.md based on feedback. Ensure professional quality, consistent voice, compelling messaging. Ready for public release.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:09.649899-06:00","updated_at":"2026-01-21T08:31:09.649899-06:00","dependencies":[{"issue_id":"vitess-h6p.3","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:09.650565-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.30","title":"[Rewrite] vitess.do Landing Page Copy","description":"Final polish of vitess.do landing page copy. Marketing-quality content that converts visitors to users. Ready for launch.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:32.276554-06:00","updated_at":"2026-01-21T08:32:32.276554-06:00","dependencies":[{"issue_id":"vitess-h6p.30","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:32.277138-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.31","title":"[Write] vitess.do Documentation Site","description":"Create initial draft of vitess.do documentation site structure and content. Include: navigation structure, content organization, tutorials section, examples section, reference section, changelog, FAQ.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:33.461291-06:00","updated_at":"2026-01-21T08:32:33.461291-06:00","dependencies":[{"issue_id":"vitess-h6p.31","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:33.461933-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.32","title":"[Edit] vitess.do Documentation Site","description":"Review and refine vitess.do documentation site. Test navigation flow, verify search works, check mobile responsiveness, improve content discoverability, fix broken links.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:34.684804-06:00","updated_at":"2026-01-21T08:32:34.684804-06:00","dependencies":[{"issue_id":"vitess-h6p.32","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:34.685576-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.33","title":"[Rewrite] vitess.do Documentation Site","description":"Final polish of vitess.do documentation site. World-class developer documentation experience. Ready for public launch.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:32:35.527451-06:00","updated_at":"2026-01-21T08:32:35.527451-06:00","dependencies":[{"issue_id":"vitess-h6p.33","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:32:35.52809-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.4","title":"[Write] @dotdo/vitess Package README","description":"Create initial draft of README for @dotdo/vitess core package. Cover: package purpose, installation, API overview, basic usage, configuration options, TypeScript types.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:11.071456-06:00","updated_at":"2026-01-21T08:31:11.071456-06:00","dependencies":[{"issue_id":"vitess-h6p.4","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:11.072102-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.5","title":"[Edit] @dotdo/vitess Package README","description":"Review and refine @dotdo/vitess package README. Verify API documentation accuracy, improve examples, check TypeScript snippets compile correctly.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:12.632765-06:00","updated_at":"2026-01-21T08:31:12.632765-06:00","dependencies":[{"issue_id":"vitess-h6p.5","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:12.633371-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.6","title":"[Rewrite] @dotdo/vitess Package README","description":"Final polish of @dotdo/vitess package README. Professional npm package documentation quality. Ready for npm publish.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:14.746931-06:00","updated_at":"2026-01-21T08:31:14.746931-06:00","dependencies":[{"issue_id":"vitess-h6p.6","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:14.747574-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.7","title":"[Write] vitess-rpc Package README","description":"Create initial draft of README for vitess-rpc package. Cover: RPC protocol design, installation, client/server setup, message formats, error handling, performance characteristics.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:25.995315-06:00","updated_at":"2026-01-21T08:31:25.995315-06:00","dependencies":[{"issue_id":"vitess-h6p.7","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:25.996241-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.8","title":"[Edit] vitess-rpc Package README","description":"Review and refine vitess-rpc package README. Verify protocol documentation, improve diagrams, ensure examples demonstrate key features.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:27.228003-06:00","updated_at":"2026-01-21T08:31:27.228003-06:00","dependencies":[{"issue_id":"vitess-h6p.8","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:27.228583-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-h6p.9","title":"[Rewrite] vitess-rpc Package README","description":"Final polish of vitess-rpc package README. Clear technical documentation suitable for developers implementing custom RPC handlers.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T08:31:28.30377-06:00","updated_at":"2026-01-21T08:31:28.30377-06:00","dependencies":[{"issue_id":"vitess-h6p.9","depends_on_id":"vitess-h6p","type":"parent-child","created_at":"2026-01-21T08:31:28.304367-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll","title":"Epic: @dotdo/vitess-postgres - PostgreSQL Storage Engine","description":"PGlite-based PostgreSQL WASM storage engine. Provides full Postgres SQL compatibility within Durable Objects.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T08:30:18.147497-06:00","updated_at":"2026-01-21T08:30:18.147497-06:00"}
{"id":"vitess-wll.1","title":"[TDD Red] PGliteAdapter initialization and lifecycle tests","description":"Create test suite defining expected behavior for PGliteAdapter initialization and lifecycle.\n\n## Test Cases to Define\n\n### Initialization\n- `test('should create adapter with default options')`\n- `test('should create adapter with custom dataDir')`\n- `test('should create adapter with in-memory mode')`\n- `test('should initialize PGlite instance lazily')`\n- `test('should reject invalid configuration options')`\n\n### Lifecycle\n- `test('should connect and report ready state')`\n- `test('should handle multiple connect calls idempotently')`\n- `test('should close connection gracefully')`\n- `test('should reject operations after close')`\n- `test('should support reconnection after close')`\n\n### Health Checks\n- `test('should report healthy when connected')`\n- `test('should report unhealthy when disconnected')`\n- `test('should timeout health check on unresponsive instance')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests use vitest with proper async handling\n- [ ] Tests are isolated and deterministic\n- [ ] Test file: `src/__tests__/adapter-lifecycle.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:52.090528-06:00","updated_at":"2026-01-21T08:31:52.090528-06:00","dependencies":[{"issue_id":"vitess-wll.1","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:31:52.091247-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.10","title":"[TDD Green] Type mapping (Postgres to JS) implementation","description":"Implement type mapping to make tests pass.\n\n## Implementation Requirements\n\n### Type Parser Registry\n```typescript\ninterface TypeParser<T = unknown> {\n  oid: number;\n  parse: (value: string) => T;\n  serialize?: (value: T) => string;\n}\n\nclass TypeRegistry {\n  register<T>(parser: TypeParser<T>): void;\n  parse(oid: number, value: string): unknown;\n  serialize(oid: number, value: unknown): string;\n}\n```\n\n### Default Parsers\n| Postgres Type | JS Type | OID |\n|--------------|---------|-----|\n| int4 | number | 23 |\n| int8 | bigint | 20 |\n| float4/8 | number | 700/701 |\n| text/varchar | string | 25/1043 |\n| bool | boolean | 16 |\n| timestamp/tz | Date | 1114/1184 |\n| json/jsonb | object | 114/3802 |\n| bytea | Uint8Array | 17 |\n| uuid | string | 2950 |\n\n### Key Behaviors\n- OID-based type detection\n- Custom parser registration\n- Array type handling\n- NULL preservation\n\n## Acceptance Criteria\n- [ ] All type mapping tests passing (green phase)\n- [ ] Type registry is extensible\n- [ ] Implementation in `src/types.ts`\n\n## Depends On\n- [TDD Green] Query execution (SELECT) implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:05.656271-06:00","updated_at":"2026-01-21T08:32:05.656271-06:00","dependencies":[{"issue_id":"vitess-wll.10","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:05.657103-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.11","title":"[TDD Red] Error handling and recovery tests","description":"Create test suite defining expected behavior for error handling and recovery.\n\n## Test Cases to Define\n\n### SQL Errors\n- `test('should throw on syntax error')`\n- `test('should throw on undefined table')`\n- `test('should throw on undefined column')`\n- `test('should include error position')`\n- `test('should include SQLSTATE code')`\n\n### Constraint Errors\n- `test('should throw PostgresError on unique violation')`\n- `test('should throw PostgresError on FK violation')`\n- `test('should throw PostgresError on check constraint')`\n- `test('should include constraint name')`\n\n### Connection Errors\n- `test('should throw on query after close')`\n- `test('should throw ConnectionError on failed init')`\n- `test('should handle corrupted data directory')`\n\n### Recovery\n- `test('should recover from syntax error')`\n- `test('should recover from constraint error')`\n- `test('should maintain connection after error')`\n- `test('should rollback transaction on error')`\n\n### Error Types\n- `test('should distinguish error types')`\n- `test('should provide error cause chain')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests verify error properties\n- [ ] Test file: `src/__tests__/error-handling.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:07.094989-06:00","updated_at":"2026-01-21T08:32:07.094989-06:00","dependencies":[{"issue_id":"vitess-wll.11","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:07.095798-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.12","title":"[TDD Green] Error handling and recovery implementation","description":"Implement error handling and recovery to make tests pass.\n\n## Implementation Requirements\n\n### Error Classes\n```typescript\nclass PostgresError extends Error {\n  code: string;        // SQLSTATE (e.g., '23505')\n  severity: string;    // ERROR, WARNING, etc.\n  position?: number;   // Character position in query\n  constraint?: string; // Constraint name if applicable\n  table?: string;      // Table name if applicable\n  column?: string;     // Column name if applicable\n}\n\nclass ConnectionError extends Error {\n  cause?: Error;\n}\n\nclass QueryTimeoutError extends Error {\n  query: string;\n  timeout: number;\n}\n```\n\n### Error Code Categories\n| SQLSTATE Class | Meaning |\n|---------------|---------|\n| 23xxx | Integrity Constraint Violation |\n| 42xxx | Syntax Error or Access Rule Violation |\n| 08xxx | Connection Exception |\n| 40xxx | Transaction Rollback |\n\n### Key Behaviors\n- Parse PGlite error messages into structured errors\n- Preserve original error as cause\n- Auto-recovery after non-fatal errors\n- Transaction cleanup on errors\n\n## Acceptance Criteria\n- [ ] All error handling tests passing (green phase)\n- [ ] Error classes exported\n- [ ] Implementation in `src/errors.ts`\n\n## Depends On\n- [TDD Green] Transaction support implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:09.251228-06:00","updated_at":"2026-01-21T08:32:09.251228-06:00","dependencies":[{"issue_id":"vitess-wll.12","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:09.251892-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.2","title":"[TDD Green] PGliteAdapter initialization and lifecycle implementation","description":"Implement PGliteAdapter initialization and lifecycle to make tests pass.\n\n## Implementation Requirements\n\n### PGliteAdapter Class\n```typescript\ninterface PGliteAdapterOptions {\n  dataDir?: string;\n  inMemory?: boolean;\n  debug?: boolean;\n}\n\nclass PGliteAdapter {\n  constructor(options?: PGliteAdapterOptions);\n  connect(): Promise<void>;\n  close(): Promise<void>;\n  isConnected(): boolean;\n  healthCheck(): Promise<boolean>;\n}\n```\n\n### Key Behaviors\n- Lazy initialization of PGlite instance\n- Proper state machine (disconnected -> connecting -> connected -> closed)\n- Graceful shutdown with pending query handling\n- Connection pooling preparation (single instance for now)\n\n## Acceptance Criteria\n- [ ] All lifecycle tests passing (green phase)\n- [ ] No regressions in other tests\n- [ ] Implementation in `src/adapter.ts`\n\n## Depends On\n- [TDD Red] PGliteAdapter initialization and lifecycle tests","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:53.172524-06:00","updated_at":"2026-01-21T08:31:53.172524-06:00","dependencies":[{"issue_id":"vitess-wll.2","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:31:53.173212-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.3","title":"[TDD Red] Query execution (SELECT) tests","description":"Create test suite defining expected behavior for SELECT query execution.\n\n## Test Cases to Define\n\n### Basic Queries\n- `test('should execute simple SELECT')`\n- `test('should execute SELECT with WHERE clause')`\n- `test('should execute SELECT with parameters')`\n- `test('should execute SELECT with JOINs')`\n- `test('should execute SELECT with aggregations')`\n\n### Result Handling\n- `test('should return rows as array of objects')`\n- `test('should return empty array for no results')`\n- `test('should include column metadata')`\n- `test('should handle NULL values correctly')`\n- `test('should preserve column order')`\n\n### Edge Cases\n- `test('should handle large result sets')`\n- `test('should handle special characters in data')`\n- `test('should handle unicode strings')`\n- `test('should reject malformed SQL')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests cover parameterized queries\n- [ ] Test file: `src/__tests__/query-select.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:55.228526-06:00","updated_at":"2026-01-21T08:31:55.228526-06:00","dependencies":[{"issue_id":"vitess-wll.3","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:31:55.229112-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.4","title":"[TDD Green] Query execution (SELECT) implementation","description":"Implement SELECT query execution to make tests pass.\n\n## Implementation Requirements\n\n### Query Method\n```typescript\ninterface QueryResult<T = Record<string, unknown>> {\n  rows: T[];\n  rowCount: number;\n  columns: ColumnMetadata[];\n}\n\ninterface ColumnMetadata {\n  name: string;\n  dataTypeID: number;\n  dataTypeName: string;\n}\n\nclass PGliteAdapter {\n  query<T>(sql: string, params?: unknown[]): Promise<QueryResult<T>>;\n}\n```\n\n### Key Behaviors\n- Parameter binding with $1, $2, etc.\n- Proper type coercion for results\n- Column metadata extraction\n- SQL injection prevention via parameterization\n\n## Acceptance Criteria\n- [ ] All SELECT tests passing (green phase)\n- [ ] Query method added to adapter\n- [ ] Type-safe generic support\n\n## Depends On\n- [TDD Green] PGliteAdapter initialization and lifecycle implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:57.139249-06:00","updated_at":"2026-01-21T08:31:57.139249-06:00","dependencies":[{"issue_id":"vitess-wll.4","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:31:57.140099-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.5","title":"[TDD Red] Write execution (INSERT/UPDATE/DELETE) tests","description":"Create test suite defining expected behavior for write operations.\n\n## Test Cases to Define\n\n### INSERT Operations\n- `test('should execute simple INSERT')`\n- `test('should execute INSERT with parameters')`\n- `test('should execute INSERT with RETURNING')`\n- `test('should execute batch INSERT')`\n- `test('should handle INSERT conflicts')`\n\n### UPDATE Operations\n- `test('should execute simple UPDATE')`\n- `test('should execute UPDATE with WHERE')`\n- `test('should execute UPDATE with parameters')`\n- `test('should return affected row count')`\n- `test('should execute UPDATE with RETURNING')`\n\n### DELETE Operations\n- `test('should execute simple DELETE')`\n- `test('should execute DELETE with WHERE')`\n- `test('should execute DELETE with parameters')`\n- `test('should return deleted row count')`\n- `test('should execute DELETE with RETURNING')`\n\n### Constraints\n- `test('should reject INSERT violating NOT NULL')`\n- `test('should reject INSERT violating UNIQUE')`\n- `test('should reject INSERT violating FOREIGN KEY')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests verify affected row counts\n- [ ] Test file: `src/__tests__/query-write.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:59.775329-06:00","updated_at":"2026-01-21T08:31:59.775329-06:00","dependencies":[{"issue_id":"vitess-wll.5","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:31:59.775934-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.6","title":"[TDD Green] Write execution (INSERT/UPDATE/DELETE) implementation","description":"Implement write operations to make tests pass.\n\n## Implementation Requirements\n\n### Execute Method\n```typescript\ninterface ExecuteResult<T = Record<string, unknown>> {\n  rowCount: number;\n  rows: T[];  // For RETURNING clauses\n}\n\nclass PGliteAdapter {\n  execute<T>(sql: string, params?: unknown[]): Promise<ExecuteResult<T>>;\n}\n```\n\n### Key Behaviors\n- Accurate affected row count reporting\n- RETURNING clause support\n- Batch operation support\n- Constraint violation error propagation\n\n## Acceptance Criteria\n- [ ] All write tests passing (green phase)\n- [ ] Execute method added to adapter\n- [ ] Proper error codes for constraint violations\n\n## Depends On\n- [TDD Green] Query execution (SELECT) implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:00.659794-06:00","updated_at":"2026-01-21T08:32:00.659794-06:00","dependencies":[{"issue_id":"vitess-wll.6","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:00.660422-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.7","title":"[TDD Red] Transaction support tests","description":"Create test suite defining expected behavior for transaction support.\n\n## Test Cases to Define\n\n### Basic Transactions\n- `test('should BEGIN transaction')`\n- `test('should COMMIT transaction')`\n- `test('should ROLLBACK transaction')`\n- `test('should isolate transaction changes')`\n\n### Transaction API\n- `test('should support transaction callback API')`\n- `test('should auto-rollback on callback error')`\n- `test('should auto-commit on callback success')`\n- `test('should provide transaction context')`\n\n### Savepoints\n- `test('should create SAVEPOINT')`\n- `test('should ROLLBACK TO SAVEPOINT')`\n- `test('should RELEASE SAVEPOINT')`\n\n### Edge Cases\n- `test('should reject nested BEGIN')`\n- `test('should handle COMMIT outside transaction')`\n- `test('should handle ROLLBACK outside transaction')`\n- `test('should timeout long-running transactions')`\n\n### Isolation\n- `test('should maintain READ COMMITTED isolation')`\n- `test('should prevent dirty reads')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests verify ACID properties\n- [ ] Test file: `src/__tests__/transactions.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:02.050686-06:00","updated_at":"2026-01-21T08:32:02.050686-06:00","dependencies":[{"issue_id":"vitess-wll.7","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:02.051462-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.8","title":"[TDD Green] Transaction support implementation","description":"Implement transaction support to make tests pass.\n\n## Implementation Requirements\n\n### Transaction API\n```typescript\ninterface TransactionContext {\n  query<T>(sql: string, params?: unknown[]): Promise<QueryResult<T>>;\n  execute<T>(sql: string, params?: unknown[]): Promise<ExecuteResult<T>>;\n  savepoint(name: string): Promise<void>;\n  rollbackTo(name: string): Promise<void>;\n  release(name: string): Promise<void>;\n}\n\nclass PGliteAdapter {\n  transaction<T>(fn: (ctx: TransactionContext) => Promise<T>): Promise<T>;\n  \n  // Low-level API\n  begin(): Promise<void>;\n  commit(): Promise<void>;\n  rollback(): Promise<void>;\n}\n```\n\n### Key Behaviors\n- Automatic rollback on errors\n- Transaction state tracking\n- Savepoint management\n- Timeout handling for stuck transactions\n\n## Acceptance Criteria\n- [ ] All transaction tests passing (green phase)\n- [ ] Both callback and manual APIs working\n- [ ] Proper cleanup on errors\n\n## Depends On\n- [TDD Green] Write execution (INSERT/UPDATE/DELETE) implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:03.175889-06:00","updated_at":"2026-01-21T08:32:03.175889-06:00","dependencies":[{"issue_id":"vitess-wll.8","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:03.176665-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-wll.9","title":"[TDD Red] Type mapping (Postgres to JS) tests","description":"Create test suite defining expected behavior for type mapping.\n\n## Test Cases to Define\n\n### Numeric Types\n- `test('should map INTEGER to number')`\n- `test('should map BIGINT to bigint')`\n- `test('should map NUMERIC to string (precision)')`\n- `test('should map REAL/DOUBLE to number')`\n- `test('should map SERIAL to number')`\n\n### String Types\n- `test('should map VARCHAR to string')`\n- `test('should map TEXT to string')`\n- `test('should map CHAR with padding')`\n\n### Boolean\n- `test('should map BOOLEAN to boolean')`\n- `test('should handle boolean string representations')`\n\n### Date/Time Types\n- `test('should map TIMESTAMP to Date')`\n- `test('should map TIMESTAMPTZ to Date')`\n- `test('should map DATE to Date')`\n- `test('should map TIME to string')`\n- `test('should map INTERVAL to object')`\n\n### Binary Types\n- `test('should map BYTEA to Uint8Array')`\n\n### JSON Types\n- `test('should map JSON to parsed object')`\n- `test('should map JSONB to parsed object')`\n\n### Array Types\n- `test('should map INTEGER[] to number[]')`\n- `test('should map TEXT[] to string[]')`\n\n### Special Types\n- `test('should map UUID to string')`\n- `test('should map NULL to null')`\n\n## Acceptance Criteria\n- [ ] All tests written and failing (red phase)\n- [ ] Tests cover bidirectional mapping\n- [ ] Test file: `src/__tests__/type-mapping.test.ts`","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:32:04.434873-06:00","updated_at":"2026-01-21T08:32:04.434873-06:00","dependencies":[{"issue_id":"vitess-wll.9","depends_on_id":"vitess-wll","type":"parent-child","created_at":"2026-01-21T08:32:04.435603-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r","title":"Epic: @dotdo/vitess Client SDK","description":"Backend-agnostic client SDK for Vitess.do. Communicates with VTGate via CapnWeb RPC. Works with both Postgres and SQLite backends.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T08:30:20.487057-06:00","updated_at":"2026-01-21T08:30:20.487057-06:00"}
{"id":"vitess-y6r.1","title":"[TDD Red] VitessClient connection lifecycle tests","description":"Write failing tests that define expected behavior for VitessClient connection lifecycle.\n\n## Test Cases\n- `connect()` establishes connection to Vitess cluster\n- `disconnect()` cleanly closes connection\n- `isConnected()` returns connection state\n- Connection auto-reconnect on transient failures\n- Connection timeout handling\n- Multiple connect() calls are idempotent\n- disconnect() on already disconnected is safe\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests document expected API surface\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:32.187137-06:00","updated_at":"2026-01-21T08:31:32.187137-06:00","dependencies":[{"issue_id":"vitess-y6r.1","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:32.187791-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.10","title":"[TDD Green] Transaction API implementation","description":"Implement transaction API to make tests pass.\n\n## Implementation\n- Implement `transaction(callback)` method\n- Create Transaction class with query/execute methods\n- Add auto-commit on success\n- Add auto-rollback on error\n- Add isolation level support\n- Add savepoint support for nested transactions\n\n## Acceptance Criteria\n- All transaction tests pass (GREEN state)\n- ACID properties maintained\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:46.122382-06:00","updated_at":"2026-01-21T08:31:46.122382-06:00","dependencies":[{"issue_id":"vitess-y6r.10","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:46.123052-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.11","title":"[TDD Red] VitessError handling tests","description":"Write failing tests that define expected behavior for error handling.\n\n## Test Cases\n- VitessError extends Error with code, message, cause\n- VitessConnectionError for connection failures\n- VitessQueryError for query syntax/execution errors\n- VitessTimeoutError for timeout scenarios\n- VitessTransactionError for transaction failures\n- Error codes are well-defined constants\n- Errors preserve stack traces\n- Errors are serializable for logging\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests verify error hierarchy and properties\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:47.66757-06:00","updated_at":"2026-01-21T08:31:47.66757-06:00","dependencies":[{"issue_id":"vitess-y6r.11","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:47.66819-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.12","title":"[TDD Green] VitessError handling implementation","description":"Implement error handling to make tests pass.\n\n## Implementation\n- Create VitessError base class\n- Create VitessConnectionError subclass\n- Create VitessQueryError subclass\n- Create VitessTimeoutError subclass\n- Create VitessTransactionError subclass\n- Define error code constants\n- Ensure proper stack trace preservation\n\n## Acceptance Criteria\n- All error handling tests pass (GREEN state)\n- Error hierarchy is clear and useful\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:49.190322-06:00","updated_at":"2026-01-21T08:31:49.190322-06:00","dependencies":[{"issue_id":"vitess-y6r.12","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:49.19106-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.13","title":"[TDD Red] Retry logic with backoff tests","description":"Write failing tests that define expected behavior for retry logic.\n\n## Test Cases\n- Retries on transient connection errors\n- Exponential backoff between retries\n- Configurable max retry attempts\n- Configurable base delay and max delay\n- Jitter added to prevent thundering herd\n- No retry on non-retryable errors\n- Retry budget/circuit breaker integration\n- Retry callbacks for observability\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests verify timing behavior\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:51.909082-06:00","updated_at":"2026-01-21T08:31:51.909082-06:00","dependencies":[{"issue_id":"vitess-y6r.13","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:51.909636-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.14","title":"[TDD Green] Retry logic with backoff implementation","description":"Implement retry logic with backoff to make tests pass.\n\n## Implementation\n- Create RetryPolicy configuration interface\n- Implement exponential backoff algorithm\n- Add jitter to delays\n- Add retryable error detection\n- Add max attempts limiting\n- Add retry event callbacks\n\n## Acceptance Criteria\n- All retry logic tests pass (GREEN state)\n- Backoff timing is correct\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:53.748436-06:00","updated_at":"2026-01-21T08:31:53.748436-06:00","dependencies":[{"issue_id":"vitess-y6r.14","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:53.749051-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.15","title":"[TDD Red] Cluster status API tests","description":"Write failing tests that define expected behavior for cluster status API.\n\n## Test Cases\n- `getClusterStatus()` returns cluster health\n- Returns list of available shards\n- Returns tablet health per shard\n- Returns primary/replica status\n- Returns lag metrics for replicas\n- Status includes keyspace information\n- Status refresh/polling configuration\n- Cached status with TTL\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests cover status data model\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:54.675242-06:00","updated_at":"2026-01-21T08:31:54.675242-06:00","dependencies":[{"issue_id":"vitess-y6r.15","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:54.675893-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.16","title":"[TDD Green] Cluster status API implementation","description":"Implement cluster status API to make tests pass.\n\n## Implementation\n- Implement `getClusterStatus()` method\n- Create ClusterStatus data model\n- Create ShardStatus data model\n- Create TabletStatus data model\n- Add status caching with TTL\n- Add polling/refresh support\n\n## Acceptance Criteria\n- All cluster status tests pass (GREEN state)\n- Status data model is complete\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:56.029996-06:00","updated_at":"2026-01-21T08:31:56.029996-06:00","dependencies":[{"issue_id":"vitess-y6r.16","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:56.030836-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.2","title":"[TDD Green] VitessClient connection lifecycle implementation","description":"Implement VitessClient connection lifecycle to make tests pass.\n\n## Implementation\n- Implement `connect()` method\n- Implement `disconnect()` method\n- Implement `isConnected()` getter\n- Add auto-reconnect logic\n- Add connection timeout handling\n\n## Acceptance Criteria\n- All connection lifecycle tests pass (GREEN state)\n- Code is minimal - just enough to pass tests\n- No premature optimization","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:33.748376-06:00","updated_at":"2026-01-21T08:31:33.748376-06:00","dependencies":[{"issue_id":"vitess-y6r.2","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:33.749043-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.3","title":"[TDD Red] Query execution API tests","description":"Write failing tests that define expected behavior for query execution API.\n\n## Test Cases\n- `query<T>(sql, params?)` returns typed results\n- Query with positional parameters\n- Query with named parameters\n- Query returns empty array for no results\n- Query timeout handling\n- Query cancellation support\n- Large result set streaming\n- Query metadata (rows affected, timing)\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests cover both success and error paths\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:35.40534-06:00","updated_at":"2026-01-21T08:31:35.40534-06:00","dependencies":[{"issue_id":"vitess-y6r.3","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:35.406031-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.4","title":"[TDD Green] Query execution API implementation","description":"Implement query execution API to make tests pass.\n\n## Implementation\n- Implement `query<T>(sql, params?)` method\n- Add parameter binding (positional and named)\n- Add result type inference\n- Add query timeout support\n- Add cancellation token support\n\n## Acceptance Criteria\n- All query execution tests pass (GREEN state)\n- Type safety maintained throughout\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:36.66388-06:00","updated_at":"2026-01-21T08:31:36.66388-06:00","dependencies":[{"issue_id":"vitess-y6r.4","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:36.664863-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.5","title":"[TDD Red] Execute (write) API tests","description":"Write failing tests that define expected behavior for execute (write) API.\n\n## Test Cases\n- `execute(sql, params?)` for INSERT/UPDATE/DELETE\n- Returns affected row count\n- Returns last insert ID for INSERTs\n- Execute with positional parameters\n- Execute with named parameters\n- Execute timeout handling\n- DDL statement execution\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests distinguish execute from query semantics\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:37.807846-06:00","updated_at":"2026-01-21T08:31:37.807846-06:00","dependencies":[{"issue_id":"vitess-y6r.5","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:37.808477-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.6","title":"[TDD Green] Execute (write) API implementation","description":"Implement execute (write) API to make tests pass.\n\n## Implementation\n- Implement `execute(sql, params?)` method\n- Return ExecuteResult with affectedRows, lastInsertId\n- Add parameter binding\n- Add timeout support\n- Handle DDL statements\n\n## Acceptance Criteria\n- All execute tests pass (GREEN state)\n- Clear separation from query semantics\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:39.74053-06:00","updated_at":"2026-01-21T08:31:39.74053-06:00","dependencies":[{"issue_id":"vitess-y6r.6","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:39.741276-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.7","title":"[TDD Red] Batch execution API tests","description":"Write failing tests that define expected behavior for batch execution API.\n\n## Test Cases\n- `batch(statements[])` executes multiple statements\n- Batch returns array of results matching input order\n- Batch with mixed query/execute statements\n- Batch atomicity options (all-or-nothing vs best-effort)\n- Batch size limits\n- Partial failure handling\n- Batch timeout for entire operation\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests cover batch edge cases\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:41.545093-06:00","updated_at":"2026-01-21T08:31:41.545093-06:00","dependencies":[{"issue_id":"vitess-y6r.7","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:41.545683-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.8","title":"[TDD Green] Batch execution API implementation","description":"Implement batch execution API to make tests pass.\n\n## Implementation\n- Implement `batch(statements[])` method\n- Return BatchResult[] matching input order\n- Add atomicity mode option\n- Add batch size validation\n- Handle partial failures gracefully\n\n## Acceptance Criteria\n- All batch execution tests pass (GREEN state)\n- Results correctly ordered\n- Minimal implementation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:42.951258-06:00","updated_at":"2026-01-21T08:31:42.951258-06:00","dependencies":[{"issue_id":"vitess-y6r.8","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:42.951965-06:00","created_by":"Nathan Clevenger"}]}
{"id":"vitess-y6r.9","title":"[TDD Red] Transaction API tests","description":"Write failing tests that define expected behavior for transaction API.\n\n## Test Cases\n- `transaction(callback)` executes in transaction context\n- Transaction auto-commits on success\n- Transaction auto-rollbacks on error\n- `tx.query()` and `tx.execute()` within transaction\n- Nested transaction handling (savepoints)\n- Transaction isolation level configuration\n- Transaction timeout handling\n- Manual commit/rollback methods\n\n## Acceptance Criteria\n- All tests written and failing (RED state)\n- Tests use vitest\n- Tests verify ACID properties\n- No implementation code written","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T08:31:44.378845-06:00","updated_at":"2026-01-21T08:31:44.378845-06:00","dependencies":[{"issue_id":"vitess-y6r.9","depends_on_id":"vitess-y6r","type":"parent-child","created_at":"2026-01-21T08:31:44.379386-06:00","created_by":"Nathan Clevenger"}]}